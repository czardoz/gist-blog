<!DOCTYPE html><html><head><meta charst="utf-8"><title>GistBlog</title><!--link(href="#{meta.site_url}/assets/bootstrap/css/bootstrap.min.css",rel="stylesheet")--><link href="http://blog.neekey.me/gist-blog/assets/common/markdown.css" rel="stylesheet"><link href="http://blog.neekey.me/gist-blog/assets/common/screen.css" rel="stylesheet"><link rel="stylesheet" href="http://yandex.st/highlightjs/7.3/styles/rainbow.min.css">
<script src="http://yandex.st/highlightjs/7.3/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script></head><body><header><div class="avatar"><img src="https://secure.gravatar.com/avatar/8896cc725e36350023e7f41f0455b8aa?d=https://a248.e.akamai.net/assets.github.com%2Fimages%2Fgravatars%2Fgravatar-user-420.png"></div><h1 class="site-title"><a href="http://blog.neekey.me/gist-blog">Neekey</a></h1><p class="site-description">在此记录我的学习&amp;生活.</p></header><div class="post-block"><p class="post-title">Mac下手动清理/安装Ruby</p><p class="update-date">2013-01-23T14:00:54Z</p><div class="post-md-content"><p>本文介绍如何在Mac OSX下手动清理和安装Ruby。献给所有不怎么懂Ruby，但是又时常为Ruby纠结的人。

</p>
<h2>清理</h2>
<p>所谓清理的话，其实只要看看Ruby在安装的时候做了什么就好了。好在Ruby自己源码安装的时候很体贴地会把自己干的事情总结出来：

</p>
<pre><code>installing binary commands:   /usr/local/bin
installing base libraries:    /usr/local/lib
installing arch files:        /usr/local/lib/ruby/1.9.1/x86_64-darwin12.2.0
installing pkgconfig data:    /usr/local/lib/pkgconfig
installing extension objects: /usr/local/lib/ruby/1.9.1/x86_64-darwin12.2.0
installing extension objects: /usr/local/lib/ruby/site_ruby/1.9.1/x86_64-darwin12.2.0
installing extension objects: /usr/local/lib/ruby/vendor_ruby/1.9.1/x86_64-darwin12.2.0
installing extension headers: /usr/local/include/ruby-1.9.1/x86_64-darwin12.2.0
installing extension scripts: /usr/local/lib/ruby/1.9.1
installing extension scripts: /usr/local/lib/ruby/site_ruby/1.9.1
installing extension scripts: /usr/local/lib/ruby/vendor_ruby/1.9.1
installing extension headers: /usr/local/include/ruby-1.9.1/ruby
installing rdoc:              /usr/local/share/ri/1.9.1/system
installing capi-docs:         /usr/local/share/doc/ruby
installing command scripts:   /usr/local/bin
installing library scripts:   /usr/local/lib/ruby/1.9.1
installing common headers:    /usr/local/include/ruby-1.9.1
installing manpages:          /usr/local/share/man/man1
installing default gems:      /usr/local/lib/ruby/gems/1.9.1 (cache, doc, gems, specifications)
                              rake 0.9.2.2
                              rdoc 3.9.4
                              minitest 2.5.1
                              json 1.5.4
                              io-console 0.3
                              bigdecimal 1.1.0</code></pre>
<p>可以看到，在默认设置中，Ruby会在下面这些地方安装东西：

</p>
<ul>
<li><code>/usr/local/lib/ruby</code>: 里面根据你安装的ruby可能会有多个版本号</li>
<li><code>/usr/local/lib/pkgconfig</code>: 貌似是将ruby的信息写进去，具体不清楚，感觉放着也没什么关系</li>
<li><code>/usr/local/bin</code>: 可执行文件，最重要的就是<code>ruby</code>和<code>gem</code>两个文件了</li>
<li><code>/usr/local/include/ruby-x.x.x</code>: ruby需要的依赖</li>
<li><code>/usr/local/share/ri/ruby-x.x.x</code>: 相关文档</li>
<li><code>/usr/local/share/doc/ruby</code>: 相关文档</li>
</ul>
<p>其他小细节可以根据上面的log输出自己查看，不过基本上删掉上面列出的，应该就差不多了。

</p>
<ul>
<li>如果发现伤处了上面的文件后，控制台下还能使用<code>ruby</code>或者<code>gem</code>命令，那么应该是你的<code>/usr/bin</code>层级也安装了<code>ruby</code>，把上面路径所有对应向上一层，都删除掉就是了，如: <code>/usr/lib</code>, <code>/usr/lib/ruby</code>...</li>
</ul>
<h2>安装</h2>
<p>这里介绍的方法是手动安装，不使用rvm等包管理程序。

</p>
<p>在安装ruby之前，先安装一个包<a href="http://pyyaml.org/wiki/LibYAML">LibYAML</a>，貌似是ruby用来解析YAML文件的依赖，必须在ruby安装前安装好，否则gem无法正常使用.

</p>
<p>安装方法：下载<a href="http://pyyaml.org/download/libyaml/yaml-0.1.4.tar.gz.">源码</a>，解压，cd进去:

</p>
<pre><code class="lang-bash">$ ./configure
$ make
# make install</code></pre>
<p>下面安装Ruby。首先到<a href="http://www.ruby-lang.org/en/downloads/">官网</a>下载源码(Compiling Ruby — Source code)，解压，cd进去：

</p>
<pre><code class="lang-bash">$ ./configure
$ make
# make install</code></pre>
<p>好安装完毕。此时你的gem的默认bindir是全局的<code>installing default gems:      /usr/local/lib/ruby/gems/1.9.1 (cache, doc, gems, specifications)</code>，

</p>
<p>之前用rvm安装的ruby，由于不大会用，将gem的路径设置到了用户目录。所以才重装~~

</p>
<h2>其他</h2>
<p>附赠rvm的删除方法：

</p>
<pre><code class="lang-bash">rvm implode</code></pre>
<p>这个单词的意思是自爆.</p>
</div></div></body></html>